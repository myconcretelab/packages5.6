(function(i){function v(p,n){function k(){if(w)q();else{var j=document.createElement("script");j.src="http://www.youtube.com/player_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(j,l);window.onYouTubePlayerAPIReady=function(){q()}}}function q(){a=new YT.Player(g[0],{events:{onReady:function(){o=true;if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}},onStateChange:function(j){switch(j.data){case YT.PlayerState.BUFFERING:if(!f){f=true;c("start")}break;case YT.PlayerState.PLAYING:if(!f){f=
true;c("start")}if(!d){d=true;c("play")}break;case YT.PlayerState.PAUSED:if(d){d=false;c("pause")}break;case YT.PlayerState.ENDED:d=false;c("end")}}}})}function x(){a=Froogaloop(g[0]);a.addEvent("ready",function(){o=true;if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}a.addEvent("loadProgress",function(){if(!f){f=true;c("start")}});a.addEvent("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEvent("pause",function(){if(d){d=false;c("pause")}});a.addEvent("finish",
function(){d=false;c("end")})})}function y(){VideoJS(g.attr("id")).ready(function(){a=this;o=true;if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}a.addEvent("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEvent("pause",function(){if(d){d=false;c("pause")}});a.addEvent("ended",function(){d=false;c("end")});a.addEvent("enterFullWindow",function(){c("fullscreenchange")});a.addEvent("exitFullWindow",function(){c("fullscreenchange")})})}function z(){if(A)r();else var j=
setInterval(function(){if(sublimevideo.prepare){clearInterval(j);r()}},100)}function r(){if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}sublimevideo.onStart(function(){c("start");c("play")});sublimevideo.onEnd(function(){c("end")})}function B(){a=g[0];o=true;if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}a.addEventListener("play",function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.addEventListener("pause",function(){if(d){d=false;c("pause")}});a.addEventListener("ended",
function(){d=false;c("end")})}function C(){var j=g.find("object").length?g.find("object").attr("id"):g.attr("id");a=jwplayer(j);o=true;if(e.settings.reachVideoAction=="playVideo"&&!h){h=true;m()}a.onPlay(function(){if(!f){f=true;c("start")}if(!d){d=true;c("play")}});a.onBuffer(function(){if(!f){f=true;c("start")}});a.onPause(function(){if(d){d=false;c("pause")}});a.onComplete(function(){d=false;c("end")})}function m(){if(b=="youtube-video")a.playVideo();else if(b=="vimeo-video")a.api("play");else if(b==
"html5-video-js")a.play();else if(b=="html5-sublime-video")sublimevideo.play();else if(b=="html5-video")a.play();else b=="jw-player-video"&&a.play(true)}function s(){if(b=="youtube-video"){a.seekTo(1);a.stopVideo()}else if(b=="vimeo-video"){a.api("pause");a.api("unload")}else if(b=="html5-video-js"){a.currentTime(0);a.pause()}else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video"){a.currentTime=0;a.pause()}else if(b=="jw-player-video"){a.seek(0);a.pause(true)}}function t(){if(b==
"youtube-video")a.pauseVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video")a.pause();else b=="jw-player-video"&&a.pause(true)}function u(){if(b=="youtube-video")a.stopVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else if(b=="html5-sublime-video")sublimevideo.stop();else if(b=="html5-video")a.pause();else b=="jw-player-video"&&a.pause(true)}function c(j){var l=
{type:j};switch(j){case "start":i.isFunction(e.settings.start)&&e.settings.start.call(this,l);break;case "play":i.isFunction(e.settings.play)&&e.settings.play.call(this,l);break;case "pause":i.isFunction(e.settings.pause)&&e.settings.pause.call(this,l);break;case "end":i.isFunction(e.settings.end)&&e.settings.end.call(this,l);break;case "fullscreenchange":i.isFunction(e.settings.fullscreenchange)&&e.settings.fullscreenchange.call(this,l)}}this.settings=i.extend({},i.fn.videoController.defaults,n);
var g=i(p),e=this,b,a,w=window.YT&&window.YT.Player,A=window.sublimevideo&&window.sublimevideo.prepare,o=false,h=false,f=false,d=false;if(g.is("iframe")&&g.attr("src").indexOf("youtube")!=-1)b="youtube-video";else if(g.is("iframe")&&g.attr("src").indexOf("vimeo")!=-1)b="vimeo-video";else if(g.hasClass("video video-js"))b="html5-video-js";else if(g.hasClass("video sublime-video")&&window.sublimevideo)b="html5-sublime-video";else if(g.is("video")&&g.hasClass("video")&&!(i.browser.msie&&parseInt(i.browser.version)<
9))b="html5-video";else if(g.parent().children('div[id*="video"]'))b="jw-player-video";switch(b){case "youtube-video":k();break;case "vimeo-video":x();break;case "html5-video-js":y();break;case "html5-sublime-video":z();break;case "html5-video":B();break;case "jw-player-video":C()}this.reachVideo=function(){if(e.settings.reachVideoAction=="playVideo"&&o&&!h){h=true;m()}};this.leaveVideo=function(){h=false;if(f&&a||b=="html5-sublime-video")if(e.settings.leaveVideoAction=="stopVideo")s();else if(e.settings.leaveVideoAction==
"pauseVideoAndBuffering")u();else e.settings.leaveVideoAction=="pauseVideo"&&t()};this.stopVideo=s;this.pauseVideo=t;this.pauseVideoAndBuffering=u}i.fn.videoController=function(p){for(var n=[],k=0;k<this.length;k++){if(!this[k].videoControllerInstance)this[k].videoControllerInstance=new v(this[k],p);n.push(this[k].videoControllerInstance)}return n.length>1?n:n[0]};i.fn.videoController.defaults={start:null,play:null,pause:null,end:null,fullscreenchange:null,reachVideoAction:"none",leaveVideoAction:"pauseVideo"}})(jQuery);
