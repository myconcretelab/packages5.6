/*! jQuery responsive breadcrumbs plugin - v1.0.2 | https://github.com/cm0s/jquery-rcrumbs | (c) 2013 Nicolas Forney | License MIT */
(function(i,t,s,e){"use strict";function n(t,s){this.element=t,this.$element=i(t),this.options=i.extend(!0,{},a,s),this._defaults=a,this._name=r,n.prototype.plugin=this,this._init()}var r="rcrumbs",a={version:"@@version",callback:{preCrumbsListDisplay:i.noop,preCrumbDisplay:i.noop,postCrumbsListDisplay:i.noop,postCrumbDisplay:i.noop},ellipsis:!0,windowResize:!0,nbUncollapsableCrumbs:2,animation:{activated:!0,speed:400}};n.prototype={version:function(){return this.options.version},_init:function(){this.$element.hasClass("rcrumbs")||this.$element.addClass("rcrumbs"),this.nbCrumbDisplayed=0,this.$crumbsList=i("ul",this.element),this.$crumbs=i("li",this.$crumbsList),this.$lastCrumb=this.$crumbs.last(),this.reversedCrumbs=i("li",this.$crumbsList).get().reverse(),this.lastNbCrumbDisplayed=0,this.totalCrumbsWidth=0,this._initCrumbs(),this._showOrHideCrumbsList(!0),this.options.windowResize&&this._showOrHideCrumbsListOnWindowResize()},_getHiddenElWidth:function(t){var s,e=i(t).clone(!1);return e.css({visibility:"hidden",position:"absolute"}),e.appendTo(this.$crumbsList),s=e.width(),e.remove(),s},_initCrumbs:function(){var t=this;i(this.$crumbsList).contents().filter(function(){return 3===this.nodeType}).remove(),i.each(this.$crumbs,function(){var s=i(this);t._storeCrumbWidth(s)})},_storeCrumbWidth:function(i){var t=this._getHiddenElWidth(i);return i.data("width",t),t},_showOrHideCrumbsList:function(t){var s=this;this.remainingSpaceToDisplayCrumbs=this.$element.width(),this.nbCrumbDisplayed=0,this.totalCrumbsWidth=0,this.nextCrumbToShowWidth=e,this.options.callback.preCrumbsListDisplay(this),i.each(this.reversedCrumbs,function(e){var n=i(this),r=i(s.reversedCrumbs[e+1]);s._showOrHideCrumb(n,r,e,t)}),this.lastNbCrumbDisplayed=this.nbCrumbDisplayed,this.options.callback.postCrumbsListDisplay(this)},_showOrHideCrumb:function(i,t,s,e){function n(){i.addClass("show"),o.lastNbCrumbDisplayed<o.nbCrumbDisplayed+1&&o.options.animation.activated&&!e?(i.width(0),i.animate({width:i.data("width")},o.options.animation.speed,function(){o.options.callback.postCrumbDisplay(i)})):o.options.callback.postCrumbDisplay(i),o.nbCrumbDisplayed+=1}function r(){i.animate({width:0},o.options.animation.speed,function(){i.removeClass("show")})}function a(i){i.css({width:o.remainingSpaceToDisplayCrumbs+i.data("width")+"px"}),i.addClass("ellipsis")}this.options.callback.preCrumbDisplay(i);var o=this;this.remainingSpaceToDisplayCrumbs-=i.data("width"),this.options.nbUncollapsableCrumbs>s?(n(),0>this.remainingSpaceToDisplayCrumbs&&a(this.$lastCrumb),this.totalCrumbsWidth+=i.data("width")):this.remainingSpaceToDisplayCrumbs>=0?(n(),this.totalCrumbsWidth+=i.data("width")):(this.lastNbCrumbDisplayed>this.nbCrumbDisplayed-1&&this.options.animation.activated?r():i.removeClass("show"),this.nextCrumbToShowWidth||(this.nextCrumbToShowWidth=i.data("width")))},_showOrHideCrumbsListOnWindowResize:function(){var s=this;i(t).resize(function(){var t=s.$element.width();(s.totalCrumbsWidth>t||t>s.totalCrumbsWidth+s.nextCrumbToShowWidth)&&(i.each(s.reversedCrumbs,function(){var t=i(this);t.stop(!0,!0)}),s._showOrHideCrumbsList()),t>=s.totalCrumbsWidth&&s.$lastCrumb.hasClass("ellipsis")&&s._disableEllipsis(s.$lastCrumb)})},_disableEllipsis:function(i){i.css({width:"auto"}),i.removeClass("ellipsis")}},i.fn[r]=function(t){if(n.prototype[t]&&-1===t.indexOf("_")){var s=i.data(this[0],"plugin_"+r);if(s)return n.prototype[t].apply(s,Array.prototype.slice.call(arguments,1));i.error("jquery."+r+" plugin must be initialized first on the element")}else{if("object"==typeof t||!t)return this.each(function(){i.data(this,"plugin_"+r)?i.error("jquery."+r+" plugin cannot be instantiated multiple times on same element"):i.data(this,"plugin_"+r,new n(this,t))});i.error("Method "+t+" does not exist on jquery."+r)}}})(jQuery,window,document);